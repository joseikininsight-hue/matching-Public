# ğŸ‰ ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸï¼æ¬¡ã¯ D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¨­å®šã§ã™

## âœ… ç¾åœ¨ã®çŠ¶æ³

**ä¿®æ­£å®Œäº†**: D1 è¨­å®šã‚’ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–ã—ã¾ã—ãŸ  
**ãƒ‡ãƒ—ãƒ­ã‚¤**: ã¾ã‚‚ãªãæˆåŠŸã—ã¾ã™  
**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ Dashboard ã§è¨­å®š

---

# ğŸ“‹ D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šæ‰‹é †ï¼ˆ5åˆ†ï¼‰

## ã‚¹ãƒ†ãƒƒãƒ— 1: Cloudflare Dashboard ã‚’é–‹ã

1. https://dash.cloudflare.com/ ã«ã‚¢ã‚¯ã‚»ã‚¹
2. **Workers & Pages** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ **`grant-matching`** ã‚’é¸æŠ
4. **Settings** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯

---

## ã‚¹ãƒ†ãƒƒãƒ— 2: D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ

### 2-1. Functions ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç§»å‹•

1. Settings ãƒšãƒ¼ã‚¸ã§ **Functions** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™
2. **D1 database bindings** ã‚’è¦‹ã¤ã‘ã‚‹

### 2-2. æ–°ã—ã„ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¿½åŠ 

1. **Add binding** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Variable name                          â”‚
â”‚ DB                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ D1 database                            â”‚
â”‚ [Create new database ã‚’é¸æŠ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database name                          â”‚
â”‚ grants-db                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

3. **Save** ã‚’ã‚¯ãƒªãƒƒã‚¯

### 2-3. Database ID ã‚’ç¢ºèª

ä½œæˆå¾Œã€ä»¥ä¸‹ã®ã‚ˆã†ãª ID ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```
Database ID: 12345678-1234-1234-1234-123456789abc
```

ã“ã® ID ã‚’ãƒ¡ãƒ¢ã—ã¦ãã ã•ã„ï¼

---

## ã‚¹ãƒ†ãƒƒãƒ— 3: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ

### 3-1. ãƒ­ãƒ¼ã‚«ãƒ«ã§ wrangler.toml ã‚’æ›´æ–°

ä½œæˆã•ã‚ŒãŸ Database ID ã‚’ä½¿ã£ã¦ã€`wrangler.toml` ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è§£é™¤ï¼š

```toml
[[d1_databases]]
binding = "DB"
database_name = "grants-db"
database_id = "12345678-1234-1234-1234-123456789abc"  â† ã‚ãªãŸã® ID ã«ç½®ãæ›ãˆ
migrations_dir = "migrations"
```

### 3-2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ

```bash
cd /home/user/webapp
npx wrangler d1 migrations apply grants-db --remote
```

**æ³¨æ„**: Cloudflare API ãƒˆãƒ¼ã‚¯ãƒ³ãŒå¿…è¦ã§ã™ã€‚ä»¥ä¸‹ã§å–å¾—ï¼š
https://dash.cloudflare.com/profile/api-tokens

---

## ã‚¹ãƒ†ãƒƒãƒ— 4: åˆå›ãƒ‡ãƒ¼ã‚¿åŒæœŸ

### 4-1. ãƒ‡ãƒ—ãƒ­ã‚¤ URL ã«ã‚¢ã‚¯ã‚»ã‚¹

ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãª URL ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```
https://grant-matching.pages.dev
```

### 4-2. WordPress ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸ

ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã® URL ã«ã‚¢ã‚¯ã‚»ã‚¹ï¼š

```
https://grant-matching.pages.dev/api/sync/wordpress?max_pages=80
```

**å‡¦ç†æ™‚é–“**: ç´„ 2-3 åˆ†  
**åŒæœŸä»¶æ•°**: ç´„ 8,000 ä»¶ã®åŠ©æˆé‡‘ãƒ‡ãƒ¼ã‚¿

### 4-3. ç¢ºèª

åŒæœŸå®Œäº†å¾Œã€ä»¥ä¸‹ã§ç¢ºèªï¼š

```
https://grant-matching.pages.dev/api/health
```

---

# ğŸ¯ ã¾ã¨ã‚

## å®Œäº†ã—ãŸä½œæ¥­

âœ… D1 è¨­å®šã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£  
âœ… wrangler.toml ã‹ã‚‰ç„¡åŠ¹ãª UUID ã‚’å‰Šé™¤  
âœ… PR #2 ã‚’ä½œæˆãƒ»ãƒãƒ¼ã‚¸  
âœ… ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™å®Œäº†

## æ¬¡ã«ã‚„ã‚‹ã“ã¨

1. â³ ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã‚’å¾…ã¤ï¼ˆ3-5åˆ†ï¼‰
2. ğŸ—„ï¸ Dashboard ã§ D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ
3. ğŸ”§ wrangler.toml ã‚’æ›´æ–°
4. ğŸš€ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
5. ğŸ“Š WordPress ãƒ‡ãƒ¼ã‚¿åŒæœŸ

## æ‰€è¦æ™‚é–“

- ãƒ‡ãƒ—ãƒ­ã‚¤å¾…æ©Ÿ: 3-5åˆ†
- D1 è¨­å®š: 5åˆ†
- ãƒ‡ãƒ¼ã‚¿åŒæœŸ: 2-3åˆ†

**åˆè¨ˆ**: ç´„ 15 åˆ†

---

# ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

## Q1: Database ID ãŒè¦‹ã¤ã‹ã‚‰ãªã„

**A**: Cloudflare Dashboard ã§:
1. **Workers & Pages** â†’ **D1**
2. `grants-db` ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é¸æŠ
3. Database ID ãŒè¡¨ç¤ºã•ã‚Œã¾ã™

## Q2: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚¨ãƒ©ãƒ¼

```
Error: Authentication error
```

**A**: Cloudflare API ãƒˆãƒ¼ã‚¯ãƒ³ãŒå¿…è¦ã§ã™ï¼š

1. https://dash.cloudflare.com/profile/api-tokens
2. **Create Token** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. **Edit Cloudflare Workers** ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠ
4. ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
5. ç’°å¢ƒå¤‰æ•°ã«è¨­å®šï¼š

```bash
export CLOUDFLARE_API_TOKEN="your-token-here"
```

## Q3: ãƒ‡ãƒ¼ã‚¿åŒæœŸãŒé…ã„

**A**: æ­£å¸¸ã§ã™ã€‚8,000ä»¶ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚
- é€²æ—ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèªã§ãã¾ã™
- F12 â†’ Console ã‚¿ãƒ–

---

# ğŸ“š å‚è€ƒæƒ…å ±

**Pull Request**: https://github.com/joseikininsight-hue/matching-Public/pull/2

**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- `DEPLOYMENT_GUIDE.md` - å®Œå…¨ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰
- `QUICK_START.md` - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ
- `ç¾åœ¨ã®çŠ¶æ³ã¨å¯¾å‡¦æ³•.md` - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**Cloudflare ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- D1 Database: https://developers.cloudflare.com/d1/
- Pages Functions: https://developers.cloudflare.com/pages/functions/

---

**æœ€çµ‚æ›´æ–°**: 2025-11-06  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ãƒ‡ãƒ—ãƒ­ã‚¤å¾…æ©Ÿä¸­
